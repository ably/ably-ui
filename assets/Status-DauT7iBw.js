import{j as J}from"./jsx-runtime-CZ2sIMGp.js";import{j as pt,r as E,R as be}from"./iframe-uAgQpGx3.js";import{c as Ye}from"./cn-Dw6GJglA.js";import{I as mt}from"./Icon-CQE5WZJ9.js";var de={exports:{}},pe={};var Me;function ht(){if(Me)return pe;Me=1;var e=pt();function t(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function c(l,d){var m=d(),T=r({inst:{value:m,getSnapshot:d}}),h=T[0].inst,M=T[1];return a(function(){h.value=m,h.getSnapshot=d,u(h)&&M({inst:h})},[l,m,d]),s(function(){return u(h)&&M({inst:h}),l(function(){u(h)&&M({inst:h})})},[l]),o(m),m}function u(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!n(l,m)}catch{return!0}}function b(l,d){return d()}var R=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b:c;return pe.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:R,pe}var ke;function gt(){return ke||(ke=1,de.exports=ht()),de.exports}var vt=gt();const Xe=0,Qe=1,Ze=2,He=3;var $e=Object.prototype.hasOwnProperty;function Ee(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ee(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if($e.call(e,n)&&++r&&!$e.call(t,n)||!(n in t)||!Ee(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const F=new WeakMap,W=()=>{},_=W(),ce=Object,f=e=>e===_,V=e=>typeof e=="function",P=(e,t)=>({...e,...t}),et=e=>V(e.then),me={},oe={},Ie="undefined",ee=typeof window!=Ie,Re=typeof document!=Ie,St=ee&&"Deno"in window,Et=()=>ee&&typeof window.requestAnimationFrame!=Ie,tt=(e,t)=>{const n=F.get(e);return[()=>!f(t)&&e.get(t)||me,r=>{if(!f(t)){const s=e.get(t);t in oe||(oe[t]=s),n[5](t,P(s,r),s||me)}},n[6],()=>!f(t)&&t in oe?oe[t]:!f(t)&&e.get(t)||me]};let we=!0;const Rt=()=>we,[ye,_e]=ee&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[W,W],wt=()=>{const e=Re&&document.visibilityState;return f(e)||e!=="hidden"},yt=e=>(Re&&document.addEventListener("visibilitychange",e),ye("focus",e),()=>{Re&&document.removeEventListener("visibilitychange",e),_e("focus",e)}),_t=e=>{const t=()=>{we=!0,e()},n=()=>{we=!1};return ye("online",t),ye("offline",n),()=>{_e("online",t),_e("offline",n)}},Ct={isOnline:Rt,isVisible:wt},Ot={initFocus:yt,initReconnect:_t},ze=!be.useId,Z=!ee||St,Dt=e=>Et()?window.requestAnimationFrame(e):setTimeout(e,1),ae=Z?E.useEffect:E.useLayoutEffect,he=typeof navigator<"u"&&navigator.connection,Be=!Z&&he&&(["slow-2g","2g"].includes(he.effectiveType)||he.saveData),ie=new WeakMap,Tt=e=>ce.prototype.toString.call(e),ge=(e,t)=>e===`[object ${t}]`;let bt=0;const Ce=e=>{const t=typeof e,n=Tt(e),r=ge(n,"Date"),s=ge(n,"RegExp"),a=ge(n,"Object");let o,c;if(ce(e)===e&&!r&&!s){if(o=ie.get(e),o)return o;if(o=++bt+"~",ie.set(e,o),Array.isArray(e)){for(o="@",c=0;c<e.length;c++)o+=Ce(e[c])+",";ie.set(e,o)}if(a){o="#";const u=ce.keys(e).sort();for(;!f(c=u.pop());)f(e[c])||(o+=c+":"+Ce(e[c])+",");ie.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},xe=e=>{if(V(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Ce(e):"",[e,t]};let It=0;const Oe=()=>++It;async function nt(...e){const[t,n,r,s]=e,a=P({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=a.populateCache;const c=a.rollbackOnError;let u=a.optimisticData;const b=d=>typeof c=="function"?c(d):c!==!1,R=a.throwOnError;if(V(n)){const d=n,m=[],T=t.keys();for(const h of T)!/^\$(inf|sub)\$/.test(h)&&d(t.get(h)._k)&&m.push(h);return Promise.all(m.map(l))}return l(n);async function l(d){const[m]=xe(d);if(!m)return;const[T,h]=tt(t,m),[M,i,te,Y]=F.get(t),U=()=>{const O=M[m];return(V(a.revalidate)?a.revalidate(T().data,d):a.revalidate!==!1)&&(delete te[m],delete Y[m],O&&O[0])?O[0](Ze).then(()=>T().data):T().data};if(e.length<3)return U();let C=r,j,A=!1;const S=Oe();i[m]=[S,0];const $=!f(u),L=T(),z=L.data,ne=L._c,k=f(ne)?z:ne;if($&&(u=V(u)?u(k,z):u,h({data:u,_c:k})),V(C))try{C=C(k)}catch(O){j=O,A=!0}if(C&&et(C))if(C=await C.catch(O=>{j=O,A=!0}),S!==i[m][0]){if(A)throw j;return C}else A&&$&&b(j)&&(o=!0,h({data:k,_c:_}));if(o&&!A)if(V(o)){const O=o(C,k);h({data:O,error:_,_c:_})}else h({data:C,error:_,_c:_});if(i[m][1]=Oe(),Promise.resolve(U()).then(()=>{h({_c:_})}),A){if(R)throw j;return}return C}}const Ke=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},rt=(e,t)=>{if(!F.has(e)){const n=P(Ot,t),r=Object.create(null),s=nt.bind(_,e);let a=W;const o=Object.create(null),c=(R,l)=>{const d=o[R]||[];return o[R]=d,d.push(l),()=>d.splice(d.indexOf(l),1)},u=(R,l,d)=>{e.set(R,l);const m=o[R];if(m)for(const T of m)T(l,d)},b=()=>{if(!F.has(e)&&(F.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,u,c]),!Z)){const R=n.initFocus(setTimeout.bind(_,Ke.bind(_,r,Xe))),l=n.initReconnect(setTimeout.bind(_,Ke.bind(_,r,Qe)));a=()=>{R&&R(),l&&l(),F.delete(e)}}};return b(),[e,s,b,a]}return[e,F.get(e)[4]]},xt=(e,t,n,r,s)=>{const a=n.errorRetryCount,o=s.retryCount,c=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!f(a)&&o>a||setTimeout(r,c,s)},Vt=Ee,[Ve,At]=rt(new Map),st=P({onLoadingSlow:W,onSuccess:W,onError:W,onErrorRetry:xt,onDiscarded:W,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Be?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Be?5e3:3e3,compare:Vt,isPaused:()=>!1,cache:Ve,mutate:At,fallback:{}},Ct),ot=(e,t)=>{const n=P(e,t);if(t){const{use:r,fallback:s}=e,{use:a,fallback:o}=t;r&&a&&(n.use=r.concat(a)),s&&o&&(n.fallback=P(s,o))}return n},De=E.createContext({}),Lt=e=>{const{value:t}=e,n=E.useContext(De),r=V(t),s=E.useMemo(()=>r?t(n):t,[r,n,t]),a=E.useMemo(()=>r?s:ot(n,s),[r,n,s]),o=s&&s.provider,c=E.useRef(_);o&&!c.current&&(c.current=rt(o(a.cache||Ve),s));const u=c.current;return u&&(a.cache=u[0],a.mutate=u[1]),ae(()=>{if(u)return u[2]&&u[2](),u[3]},[]),E.createElement(De.Provider,P(e,{value:a}))},jt="$inf$",it=ee&&window.__SWR_DEVTOOLS_USE__,Nt=it?window.__SWR_DEVTOOLS_USE__:[],qt=()=>{it&&(window.__SWR_DEVTOOLS_REACT__=be)},Ft=e=>V(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Pt=()=>{const e=E.useContext(De);return E.useMemo(()=>P(st,e),[e])},Ut=e=>(t,n,r)=>e(t,n&&((...a)=>{const[o]=xe(t),[,,,c]=F.get(Ve);if(o.startsWith(jt))return n(...a);const u=c[o];return f(u)?n(...a):(delete c[o],u)}),r),Wt=Nt.concat(Ut),Mt=e=>function(...n){const r=Pt(),[s,a,o]=Ft(n),c=ot(r,o);let u=e;const{use:b}=c,R=(b||[]).concat(Wt);for(let l=R.length;l--;)u=R[l](u);return u(s,a||c.fetcher||null,c)},kt=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};qt();const ve=be.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Se={dedupe:!0},Ge=Promise.resolve(_),Ht=(e,t,n)=>{const{cache:r,compare:s,suspense:a,fallbackData:o,revalidateOnMount:c,revalidateIfStale:u,refreshInterval:b,refreshWhenHidden:R,refreshWhenOffline:l,keepPreviousData:d}=n,[m,T,h,M]=F.get(r),[i,te]=xe(e),Y=E.useRef(!1),U=E.useRef(!1),C=E.useRef(i),j=E.useRef(t),A=E.useRef(n),S=()=>A.current,$=()=>S().isVisible()&&S().isOnline(),[L,z,ne,k]=tt(r,i),O=E.useRef({}).current,X=f(o)?f(n.fallback)?_:n.fallback[i]:o,Ae=(p,v)=>{for(const w in O){const g=w;if(g==="data"){if(!s(p[g],v[g])&&(!f(p[g])||!s(se,v[g])))return!1}else if(v[g]!==p[g])return!1}return!0},Le=E.useMemo(()=>{const p=!i||!t?!1:f(c)?S().isPaused()||a?!1:u!==!1:c,v=D=>{const N=P(D);return delete N._k,p?{isValidating:!0,isLoading:!0,...N}:N},w=L(),g=k(),x=v(w),G=w===g?x:v(g);let y=x;return[()=>{const D=v(L());return Ae(D,y)?(y.data=D.data,y.isLoading=D.isLoading,y.isValidating=D.isValidating,y.error=D.error,y):(y=D,D)},()=>G]},[r,i]),B=vt.useSyncExternalStore(E.useCallback(p=>ne(i,(v,w)=>{Ae(w,v)||p()}),[r,i]),Le[0],Le[1]),je=!Y.current,ut=m[i]&&m[i].length>0,K=B.data,H=f(K)?X&&et(X)?ve(X):X:K,re=B.error,ue=E.useRef(H),se=d?f(K)?f(ue.current)?H:ue.current:K:H,Ne=ut&&!f(re)?!1:je&&!f(c)?c:S().isPaused()?!1:a?f(H)?!1:u:f(H)||u,qe=!!(i&&t&&je&&Ne),lt=f(B.isValidating)?qe:B.isValidating,ft=f(B.isLoading)?qe:B.isLoading,Q=E.useCallback(async p=>{const v=j.current;if(!i||!v||U.current||S().isPaused())return!1;let w,g,x=!0;const G=p||{},y=!h[i]||!G.dedupe,D=()=>ze?!U.current&&i===C.current&&Y.current:i===C.current,N={isValidating:!1,isLoading:!1},Pe=()=>{z(N)},Ue=()=>{const I=h[i];I&&I[1]===g&&delete h[i]},We={isValidating:!0};f(L().data)&&(We.isLoading=!0);try{if(y&&(z(We),n.loadingTimeout&&f(L().data)&&setTimeout(()=>{x&&D()&&S().onLoadingSlow(i,n)},n.loadingTimeout),h[i]=[v(te),Oe()]),[w,g]=h[i],w=await w,y&&setTimeout(Ue,n.dedupingInterval),!h[i]||h[i][1]!==g)return y&&D()&&S().onDiscarded(i),!1;N.error=_;const I=T[i];if(!f(I)&&(g<=I[0]||g<=I[1]||I[1]===0))return Pe(),y&&D()&&S().onDiscarded(i),!1;const q=L().data;N.data=s(q,w)?q:w,y&&D()&&S().onSuccess(w,i,n)}catch(I){Ue();const q=S(),{shouldRetryOnError:le}=q;q.isPaused()||(N.error=I,y&&D()&&(q.onError(I,i,q),(le===!0||V(le)&&le(I))&&(!S().revalidateOnFocus||!S().revalidateOnReconnect||$())&&q.onErrorRetry(I,i,q,dt=>{const fe=m[i];fe&&fe[0]&&fe[0](He,dt)},{retryCount:(G.retryCount||0)+1,dedupe:!0})))}return x=!1,Pe(),!0},[i,r]),Fe=E.useCallback((...p)=>nt(r,C.current,...p),[]);if(ae(()=>{j.current=t,A.current=n,f(K)||(ue.current=K)}),ae(()=>{if(!i)return;const p=Q.bind(_,Se);let v=0;S().revalidateOnFocus&&(v=Date.now()+S().focusThrottleInterval);const g=kt(i,m,(x,G={})=>{if(x==Xe){const y=Date.now();S().revalidateOnFocus&&y>v&&$()&&(v=y+S().focusThrottleInterval,p())}else if(x==Qe)S().revalidateOnReconnect&&$()&&p();else{if(x==Ze)return Q();if(x==He)return Q(G)}});return U.current=!1,C.current=i,Y.current=!0,z({_k:te}),Ne&&(h[i]||(f(H)||Z?p():Dt(p))),()=>{U.current=!0,g()}},[i]),ae(()=>{let p;function v(){const g=V(b)?b(L().data):b;g&&p!==-1&&(p=setTimeout(w,g))}function w(){!L().error&&(R||S().isVisible())&&(l||S().isOnline())?Q(Se).then(v):v()}return v(),()=>{p&&(clearTimeout(p),p=-1)}},[b,R,l,i]),E.useDebugValue(se),a){if(!ze&&Z)throw new Error("Fallback data is required when using Suspense in SSR.");const p=i&&f(H);p&&(j.current=t,A.current=n,U.current=!1);const v=M[i],w=!f(v)&&p?Fe(v):Ge;if(ve(w),!f(re)&&p)throw re;const g=p?Q(Se):Ge;!f(se)&&p&&(g.status="fulfilled",g.value=!0),ve(g)}return{mutate:Fe,get data(){return O.data=!0,se},get error(){return O.error=!0,re},get isValidating(){return O.isValidating=!0,lt},get isLoading(){return O.isLoading=!0,ft}}},Xt=ce.defineProperty(Lt,"defaultValue",{value:st}),at=Mt(Ht),Qt=["none","operational","minor","major","critical","unknown"],$t="https://ntqy1wz94gjv.statuspage.io/api/v2/status.json",ct=e=>fetch(e).then(t=>t.json()),zt=e=>{switch(e){case"none":case"operational":return"bg-gui-success-green";case"minor":return"bg-yellow-500";case"major":return"bg-orange-500";case"critical":return"bg-gui-error-red";default:return"bg-neutral-500"}},Te=({statusUrl:e,refreshInterval:t=1e3*60})=>{const{data:n,error:r,isLoading:s}=at(e,ct,{refreshInterval:t});return J.jsx("span",{className:Ye("inline-flex h-2 aspect-square rounded-full",zt(n?.status?.indicator),{"animate-pulse":s||r})})},Je=({statusUrl:e=$t,additionalCSS:t,refreshInterval:n=1e3*60,showDescription:r=!1})=>{const{data:s}=at(e,ct,{refreshInterval:n});return J.jsxs("a",{href:"https://status.ably.com",className:Ye("inline-flex group/status items-center gap-2",t),target:"_blank",rel:"noreferrer",children:[J.jsx(Te,{statusUrl:e,refreshInterval:n??1e3*60}),r&&s?.status?.description&&J.jsxs("div",{className:"flex gap-2 ui-text-label4 font-medium text-neutral-900 group-hover/status:text-neutral-1300 dark:text-neutral-400 dark:group-hover/status:text-neutral-000 transition-colors",children:[J.jsx("span",{children:s.status.description.charAt(0).toUpperCase()+s.status.description.slice(1).toLowerCase()}),J.jsx(mt,{name:"icon-gui-arrow-top-right-on-square-outline",size:"16px"})]})]})};try{Te.displayName="StatusIcon",Te.__docgenInfo={description:"",displayName:"StatusIcon",props:{statusUrl:{defaultValue:{value:"https://ntqy1wz94gjv.statuspage.io/api/v2/status.json"},description:"",name:"statusUrl",required:!1,type:{name:"string"}},additionalCSS:{defaultValue:null,description:"",name:"additionalCSS",required:!1,type:{name:"string"}},refreshInterval:{defaultValue:{value:"1000 * 60"},description:"",name:"refreshInterval",required:!1,type:{name:"number"}},showDescription:{defaultValue:{value:"false"},description:"",name:"showDescription",required:!1,type:{name:"boolean"}}}}}catch{}try{Je.displayName="Status",Je.__docgenInfo={description:"",displayName:"Status",props:{statusUrl:{defaultValue:{value:"https://ntqy1wz94gjv.statuspage.io/api/v2/status.json"},description:"",name:"statusUrl",required:!1,type:{name:"string"}},additionalCSS:{defaultValue:null,description:"",name:"additionalCSS",required:!1,type:{name:"string"}},refreshInterval:{defaultValue:{value:"1000 * 60"},description:"",name:"refreshInterval",required:!1,type:{name:"number"}},showDescription:{defaultValue:{value:"false"},description:"",name:"showDescription",required:!1,type:{name:"boolean"}}}}}catch{}export{Je as S,$t as a,Xt as b,Qt as s};
