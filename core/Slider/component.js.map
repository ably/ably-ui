{"version":3,"sources":["../../../src/core/Slider/component.js"],"sourcesContent":["import { throttle } from \"es-toolkit/compat\";\n\nimport { queryId, queryIdAll } from \"../dom-query\";\n\nconst mdBreakpoint = () => window.matchMedia(\"(min-width: 48rem)\").matches;\nconst DRAG_BUFFER = 20;\n\nconst init = (slidesContainer) => {\n  const transformContainer = queryId(\"slider-strip\", slidesContainer);\n  const slides = Array.from(queryIdAll(\"slider-slide\", slidesContainer));\n  const slideLeftChevron = queryId(\"slider-previous\", slidesContainer);\n  const slideRightChevron = queryId(\"slider-next\", slidesContainer);\n  const slideMarkers = Array.from(queryIdAll(\"slider-marker\", slidesContainer));\n  const sliderControls = queryId(\"slider-controls\", slidesContainer);\n\n  sliderControls.classList.replace(\"hidden\", \"flex\");\n  const slidesLength = slides.length;\n\n  const slidesWidth = slidesContainer.getBoundingClientRect().width;\n  const { width: slideWidth, left: slideLeftDistance } =\n    slides[0].getBoundingClientRect();\n  const { left: slideLeftDistanceSecond } = slides[1].getBoundingClientRect();\n  const slideGap = slideLeftDistanceSecond - slideLeftDistance - slideWidth;\n  const adjustment = (slidesWidth - slideWidth) / 2;\n\n  let currentIndex = 0;\n  let touchStartX = 0;\n\n  const calculateTransform = (index) =>\n    index * -slideWidth + adjustment + index * -slideGap;\n\n  const updateSlide = (index) =>\n    (transformContainer.style.transform = `translateX(${calculateTransform(\n      index,\n    )}px)`);\n\n  const updateMarkers = (index) => {\n    slideMarkers.forEach((marker) =>\n      marker.classList.remove(\"text-active-orange\"),\n    );\n    slideMarkers[index].classList.remove(\"text-cool-black\");\n    slideMarkers[index].classList.add(\"text-active-orange\");\n  };\n\n  const slideLeft = () => {\n    currentIndex = currentIndex - 1 <= 0 ? 0 : currentIndex - 1;\n    updateSlide(currentIndex);\n    updateMarkers(currentIndex);\n  };\n\n  const slideRight = () => {\n    currentIndex =\n      currentIndex + 1 >= slidesLength ? currentIndex : currentIndex + 1;\n    updateSlide(currentIndex);\n    updateMarkers(currentIndex);\n  };\n\n  updateSlide(0);\n  updateMarkers(0);\n\n  slideLeftChevron.addEventListener(\"click\", slideLeft);\n\n  transformContainer.addEventListener(\"touchstart\", (e) => {\n    touchStartX = e.touches[0]?.clientX;\n  });\n\n  transformContainer.addEventListener(\"touchend\", (e) => {\n    const distance = e.changedTouches[0]?.clientX - touchStartX;\n\n    // Prevent sliding on clicks\n    if (Math.abs(distance) < DRAG_BUFFER) return;\n\n    const direction = distance > 0 ? slideLeft : slideRight;\n    direction();\n  });\n\n  slideRightChevron.addEventListener(\"click\", slideRight);\n\n  return () => {\n    transformContainer.style.transform = null;\n    sliderControls.classList.replace(\"flex\", \"hidden\");\n  };\n};\n\nconst Slider = ({ container, mqEnableThreshold }) => {\n  if (!container) return;\n\n  const breakpointCheck = mqEnableThreshold || (() => !mdBreakpoint());\n\n  let unmount = () => {};\n  if (breakpointCheck()) unmount = init(container);\n\n  window.addEventListener(\n    \"resize\",\n    throttle(() => {\n      if (breakpointCheck()) {\n        unmount = init(container);\n      } else {\n        unmount();\n      }\n    }, 100),\n  );\n};\n\nexport default Slider;\n"],"names":["throttle","queryId","queryIdAll","mdBreakpoint","window","matchMedia","matches","DRAG_BUFFER","init","slidesContainer","transformContainer","slides","Array","from","slideLeftChevron","slideRightChevron","slideMarkers","sliderControls","classList","replace","slidesLength","length","slidesWidth","getBoundingClientRect","width","slideWidth","left","slideLeftDistance","slideLeftDistanceSecond","slideGap","adjustment","currentIndex","touchStartX","calculateTransform","index","updateSlide","style","transform","updateMarkers","forEach","marker","remove","add","slideLeft","slideRight","addEventListener","e","touches","clientX","distance","changedTouches","Math","abs","direction","Slider","container","mqEnableThreshold","breakpointCheck","unmount"],"mappings":"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"}