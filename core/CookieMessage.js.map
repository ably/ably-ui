{"version":3,"sources":["../../src/core/CookieMessage.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport Cookie from \"js-cookie\";\n\nimport _absUrl from \"./url-base\";\n\nconst COOKIE_EXPIRY = 365;\n\ntype CookieMessageProps = {\n  cookieId: string;\n  urlBase: string;\n};\n\nconst CookieMessage = ({ cookieId, urlBase }: CookieMessageProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [hideCookieMessage, setHideCookieMessage] = useState(() =>\n    Cookie.get(cookieId) ? true : false,\n  );\n\n  useEffect(() => {\n    const isCookieSet = Cookie.get(cookieId) ? true : false;\n    if (hideCookieMessage !== isCookieSet) {\n      setHideCookieMessage(isCookieSet);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cookieId]);\n\n  const handleClose = () => {\n    Cookie.set(cookieId, \"1\", { expires: COOKIE_EXPIRY });\n\n    ref.current?.classList.add(\"bottom-px\", \"opacity-0\");\n    setTimeout(() => setHideCookieMessage(true), 500);\n  };\n\n  const absUrl = (path: string) => _absUrl(path, urlBase);\n\n  // Presume the message is hidden by default\n  if (hideCookieMessage) return null;\n\n  return (\n    <div className=\"ui-cookie-message\" ref={ref}>\n      <p className=\"ui-text-p2 pr-8\">\n        <a href={absUrl(\"/privacy\")} className=\"underline\">\n          How we use cookies\n        </a>{\" \"}\n        to improve your experience.\n      </p>\n      <button\n        className=\"ui-btn-secondary mt-3 sm:mt-0 whitespace-nowrap\"\n        onClick={handleClose}\n      >\n        Accept and close\n      </button>\n    </div>\n  );\n};\n\nexport default CookieMessage;\n"],"names":["React","useRef","useEffect","useState","Cookie","_absUrl","COOKIE_EXPIRY","CookieMessage","cookieId","urlBase","ref","hideCookieMessage","setHideCookieMessage","get","isCookieSet","handleClose","set","expires","current","classList","add","setTimeout","absUrl","path","div","className","p","a","href","button","onClick"],"mappings":"AAAA,OAAOA,OAASC,MAAM,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAQ,AAC3D,QAAOC,WAAY,WAAY,AAE/B,QAAOC,YAAa,YAAa,CAEjC,MAAMC,cAAgB,IAOtB,MAAMC,cAAgB,CAAC,CAAEC,QAAQ,CAAEC,OAAO,CAAsB,IAC9D,MAAMC,IAAMT,OAAuB,MACnC,KAAM,CAACU,kBAAmBC,qBAAqB,CAAGT,SAAS,IACzDC,OAAOS,GAAG,CAACL,UAAY,KAAO,OAGhCN,UAAU,KACR,MAAMY,YAAcV,OAAOS,GAAG,CAACL,UAAY,KAAO,MAClD,GAAIG,oBAAsBG,YAAa,CACrCF,qBAAqBE,YACvB,CAEF,EAAG,CAACN,SAAS,EAEb,MAAMO,YAAc,KAClBX,OAAOY,GAAG,CAACR,SAAU,IAAK,CAAES,QAASX,aAAc,EAEnDI,CAAAA,IAAIQ,OAAO,EAAEC,UAAUC,IAAI,YAAa,aACxCC,WAAW,IAAMT,qBAAqB,MAAO,IAC/C,EAEA,MAAMU,OAAS,AAACC,MAAiBlB,QAAQkB,KAAMd,SAG/C,GAAIE,kBAAmB,OAAO,KAE9B,OACE,oBAACa,OAAIC,UAAU,oBAAoBf,IAAKA,KACtC,oBAACgB,KAAED,UAAU,mBACX,oBAACE,KAAEC,KAAMN,OAAO,YAAaG,UAAU,aAAY,sBAE9C,IAAI,+BAGX,oBAACI,UACCJ,UAAU,kDACVK,QAASf,aACV,oBAKP,CAEA,gBAAeR,aAAc"}