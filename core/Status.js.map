{"version":3,"sources":["../../src/core/Status.tsx"],"sourcesContent":["import React from \"react\";\nimport useSWR from \"swr\";\nimport cn from \"./utils/cn\";\nimport Icon from \"./Icon\";\n\ntype StatusProps = {\n  statusUrl: string;\n  additionalCSS?: string;\n  refreshInterval?: number;\n  showDescription?: boolean;\n};\n\nexport const statusTypes = [\n  \"none\",\n  \"operational\",\n  \"minor\",\n  \"major\",\n  \"critical\",\n  \"unknown\",\n] as const;\n\nexport type StatusType = (typeof statusTypes)[number];\n\nexport const StatusUrl =\n  \"https://ntqy1wz94gjv.statuspage.io/api/v2/status.json\";\n\n// Our SWR fetcher function\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nconst indicatorClass = (indicator?: StatusType) => {\n  switch (indicator) {\n    case \"none\":\n    case \"operational\":\n      return \"bg-gui-success-green\";\n    case \"minor\":\n      return \"bg-yellow-500\";\n    case \"major\":\n      return \"bg-orange-500\";\n    case \"critical\":\n      return \"bg-gui-error-red\";\n    default:\n      return \"bg-neutral-500\";\n  }\n};\n\nexport const StatusIcon = ({\n  statusUrl,\n  refreshInterval = 1000 * 60,\n}: StatusProps) => {\n  const { data, error, isLoading } = useSWR(statusUrl, fetcher, {\n    refreshInterval,\n  });\n\n  return (\n    <span\n      className={cn(\n        \"inline-flex h-2 aspect-square rounded-full\",\n        indicatorClass(data?.status?.indicator),\n        { \"animate-pulse\": isLoading || error },\n      )}\n    ></span>\n  );\n};\n\nconst Status = ({\n  statusUrl = StatusUrl,\n  additionalCSS,\n  refreshInterval = 1000 * 60,\n  showDescription = false,\n}: StatusProps) => {\n  const { data } = useSWR(statusUrl, fetcher, {\n    refreshInterval,\n  });\n\n  return (\n    <a\n      href=\"https://status.ably.com\"\n      className={cn(\n        \"inline-flex group/status items-center gap-2\",\n        additionalCSS,\n      )}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      <StatusIcon\n        statusUrl={statusUrl}\n        refreshInterval={refreshInterval ?? 1000 * 60}\n      />\n      {showDescription && data?.status?.description && (\n        <div className=\"flex gap-2 ui-text-label4 font-medium text-neutral-900 group-hover/status:text-neutral-1300 dark:text-neutral-400 dark:group-hover/status:text-neutral-000 transition-colors\">\n          <span>\n            {data.status.description.charAt(0).toUpperCase() +\n              data.status.description.slice(1).toLowerCase()}\n          </span>\n          <Icon name=\"icon-gui-arrow-top-right-on-square-outline\" size=\"16px\" />\n        </div>\n      )}\n    </a>\n  );\n};\n\nexport default Status;\n"],"names":["React","useSWR","cn","Icon","statusTypes","StatusUrl","fetcher","url","fetch","then","res","json","indicatorClass","indicator","StatusIcon","statusUrl","refreshInterval","data","error","isLoading","span","className","status","Status","additionalCSS","showDescription","a","href","target","rel","description","div","charAt","toUpperCase","slice","toLowerCase","name","size"],"mappings":"AAAA,OAAOA,UAAW,OAAQ,AAC1B,QAAOC,WAAY,KAAM,AACzB,QAAOC,OAAQ,YAAa,AAC5B,QAAOC,SAAU,QAAS,AAS1B,QAAO,MAAMC,YAAc,CACzB,OACA,cACA,QACA,QACA,WACA,UACD,AAAU,AAIX,QAAO,MAAMC,UACX,uDAAwD,CAG1D,MAAMC,QAAU,AAACC,KAAgBC,MAAMD,KAAKE,IAAI,CAAC,AAACC,KAAQA,IAAIC,IAAI,IAElE,MAAMC,eAAiB,AAACC,YACtB,OAAQA,WACN,IAAK,OACL,IAAK,cACH,MAAO,sBACT,KAAK,QACH,MAAO,eACT,KAAK,QACH,MAAO,eACT,KAAK,WACH,MAAO,kBACT,SACE,MAAO,gBACX,CACF,CAEA,QAAO,MAAMC,WAAa,CAAC,CACzBC,SAAS,CACTC,gBAAkB,IAAO,EAAE,CACf,IACZ,KAAM,CAAEC,IAAI,CAAEC,KAAK,CAAEC,SAAS,CAAE,CAAGlB,OAAOc,UAAWT,QAAS,CAC5DU,eACF,GAEA,OACE,oBAACI,QACCC,UAAWnB,GACT,6CACAU,eAAeK,MAAMK,QAAQT,WAC7B,CAAE,gBAAiBM,WAAaD,KAAM,IAI9C,CAAE,CAEF,MAAMK,OAAS,CAAC,CACdR,UAAYV,SAAS,CACrBmB,aAAa,CACbR,gBAAkB,IAAO,EAAE,CAC3BS,gBAAkB,KAAK,CACX,IACZ,KAAM,CAAER,IAAI,CAAE,CAAGhB,OAAOc,UAAWT,QAAS,CAC1CU,eACF,GAEA,OACE,oBAACU,KACCC,KAAK,0BACLN,UAAWnB,GACT,8CACAsB,eAEFI,OAAO,SACPC,IAAI,cAEJ,oBAACf,YACCC,UAAWA,UACXC,gBAAiBA,iBAAmB,IAAO,KAE5CS,iBAAmBR,MAAMK,QAAQQ,aAChC,oBAACC,OAAIV,UAAU,gLACb,oBAACD,YACEH,KAAKK,MAAM,CAACQ,WAAW,CAACE,MAAM,CAAC,GAAGC,WAAW,GAC5ChB,KAAKK,MAAM,CAACQ,WAAW,CAACI,KAAK,CAAC,GAAGC,WAAW,IAEhD,oBAAChC,MAAKiC,KAAK,6CAA6CC,KAAK,UAKvE,CAEA,gBAAed,MAAO"}