{"version":3,"sources":["../../src/core/remote-data-store.js"],"sourcesContent":["import { createStore, combineReducers } from \"redux\";\n\nexport const attachStoreToWindow = (store) => {\n  window.AblyUi = window.AblyUi || {};\n  window.AblyUi.RemoteDataStore = store;\n};\n\nexport const getRemoteDataStore = () => {\n  if (!window.AblyUi.RemoteDataStore) {\n    throw new Error(\"Remote store was called before one was created\");\n  }\n\n  return window.AblyUi.RemoteDataStore;\n};\n\nexport const connectState = (selector, setState) => {\n  const store = getRemoteDataStore();\n  let cachedOldState = selector(store);\n\n  store.subscribe(() => {\n    const newState = selector(store);\n\n    // Do nothing, state is the same\n    if (newState === cachedOldState) {\n      return;\n    }\n\n    cachedOldState = newState;\n    setState(newState);\n  });\n};\n\nexport const createRemoteDataStore = (reducers) =>\n  createStore(combineReducers(reducers));\n"],"names":["createStore","combineReducers","attachStoreToWindow","store","window","AblyUi","RemoteDataStore","getRemoteDataStore","Error","connectState","selector","setState","cachedOldState","subscribe","newState","createRemoteDataStore","reducers"],"mappings":"AAAA,OAASA,WAAW,CAAEC,eAAe,KAAQ,OAAQ,AAErD,QAAO,MAAMC,oBAAsB,AAACC,QAClCC,OAAOC,MAAM,CAAGD,OAAOC,MAAM,EAAI,CAAC,CAClCD,CAAAA,OAAOC,MAAM,CAACC,eAAe,CAAGH,KAClC,CAAE,AAEF,QAAO,MAAMI,mBAAqB,KAChC,GAAI,CAACH,OAAOC,MAAM,CAACC,eAAe,CAAE,CAClC,MAAM,IAAIE,MAAM,iDAClB,CAEA,OAAOJ,OAAOC,MAAM,CAACC,eAAe,AACtC,CAAE,AAEF,QAAO,MAAMG,aAAe,CAACC,SAAUC,YACrC,MAAMR,MAAQI,qBACd,IAAIK,eAAiBF,SAASP,OAE9BA,MAAMU,SAAS,CAAC,KACd,MAAMC,SAAWJ,SAASP,OAG1B,GAAIW,WAAaF,eAAgB,CAC/B,MACF,CAEAA,eAAiBE,SACjBH,SAASG,SACX,EACF,CAAE,AAEF,QAAO,MAAMC,sBAAwB,AAACC,UACpChB,YAAYC,gBAAgBe,UAAW"}