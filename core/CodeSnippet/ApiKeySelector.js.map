{"version":3,"sources":["../../../src/core/CodeSnippet/ApiKeySelector.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport * as Select from \"@radix-ui/react-select\";\nimport Badge from \"../Badge\";\nimport Icon from \"../Icon\";\nimport Tooltip from \"../Tooltip\";\nimport type { ApiKeysItem } from \"../CodeSnippet\";\n\ntype ApiKeySelectorProps = {\n  apiKeys?: ApiKeysItem[];\n  selectedApiKey: string;\n  onApiKeyChange: (apiKey: string) => void;\n};\n\nconst ApiKeySelector = ({\n  apiKeys,\n  selectedApiKey,\n  onApiKeyChange,\n}: ApiKeySelectorProps) => {\n  const isDemoMode = useMemo(\n    () => apiKeys?.length === 1 && apiKeys[0].app === \"demo\",\n    [apiKeys],\n  );\n\n  const renderDemoMode = useMemo(\n    () => (\n      <div className=\"flex items-center gap-2\">\n        <Badge className=\"ml-1 bg-neutral-200 dark:bg-neutral-1100\">\n          DEMO ONLY\n        </Badge>\n        <Tooltip\n          className=\"ml-0\"\n          triggerProps={{\n            className: \"h-5\",\n          }}\n          contentProps={{\n            className:\n              \"bg-neutral-1100 dark:bg-neutral-200 text-neutral-300 dark:text-neutral-1000\",\n          }}\n          triggerElement={\n            <div className=\"group/code-snippet-tooltip-icon-hover flex items-center justify-center\">\n              <Icon\n                name=\"icon-gui-information-circle-outline\"\n                size=\"20px\"\n                color=\"text-neutral-700 dark:text-neutral-600\"\n                additionalCSS=\"group-hover/code-snippet-tooltip-icon-hover:hidden\"\n              />\n              <Icon\n                name=\"icon-gui-information-circle-solid\"\n                size=\"20px\"\n                color=\"text-neutral-1300 dark:text-neutral-000\"\n                additionalCSS=\"group-hover/code-snippet-tooltip-icon-hover:flex hidden\"\n              />\n            </div>\n          }\n        >\n          This code example uses a temporary key that is rate limited and\n          expires in 4 hrs. Sign in to Ably to use your API keys instead.\n        </Tooltip>\n      </div>\n    ),\n    [],\n  );\n\n  const renderApiKeyDropdown = useMemo(() => {\n    if (isDemoMode) {\n      return renderDemoMode;\n    }\n\n    if (!apiKeys?.length) {\n      return null;\n    }\n\n    return (\n      <Select.Root value={selectedApiKey} onValueChange={onApiKeyChange}>\n        <Select.Trigger\n          className=\"font-sans inline-flex items-center justify-between rounded px-3 py-2 ml-1 text-14 text-neutral-1300 dark:text-neutral-000 bg-neutral-200 dark:bg-neutral-1100 hover:bg-neutral-300 dark:hover:bg-neutral-1000 gap-2 focus-base border border-neutral-300 dark:border-neutral-1000 transition-colors\"\n          aria-label=\"API Key\"\n        >\n          <Select.Value />\n          <Select.Icon className=\"size-4\">\n            <Icon name=\"icon-gui-chevron-down-micro\" size=\"16px\" />\n          </Select.Icon>\n        </Select.Trigger>\n\n        <Select.Portal>\n          <Select.Content className=\"overflow-hidden rounded-lg bg-neutral-000 dark:bg-neutral-1300 border border-neutral-300 dark:border-neutral-1000 shadow-md z-50\">\n            <Select.ScrollUpButton className=\"flex items-center justify-center h-6 bg-neutral-000 dark:bg-neutral-1300 text-neutral-1300 dark:text-neutral-000 cursor-default focus-base\">\n              <Icon\n                name=\"icon-gui-chevron-down-outline\"\n                size=\"16px\"\n                additionalCSS=\"rotate-180\"\n              />\n            </Select.ScrollUpButton>\n\n            <Select.Viewport className=\"rounded-lg font-sans\">\n              {apiKeys.map((apiKeyItem) => (\n                <Select.Group key={apiKeyItem.app}>\n                  {apiKeys.length > 1 && (\n                    <Select.Label className=\"text-neutral-700 rounded-none dark:text-neutral-600 p-1 bg-neutral-200 dark:bg-neutral-1100\">\n                      {apiKeyItem.app}\n                    </Select.Label>\n                  )}\n                  {apiKeyItem.keys.map(({ name, key }) => (\n                    <Select.Item\n                      key={`${apiKeyItem.app}-${name}-${key}`}\n                      value={key}\n                      className=\"relative flex items-center justify-between m-2 p-2 rounded-lg text-14 text-neutral-1300 dark:text-neutral-000 select-none hover:bg-neutral-100 dark:hover:bg-neutral-1200 data-[highlighted]:outline-none data-[highlighted]:bg-neutral-100 dark:data-[highlighted]:bg-neutral-1200 focus-base min-w-64\"\n                    >\n                      <Select.ItemText>\n                        {key.length > 10 ? `${key.substring(0, 10)}...` : key}\n                        <span className=\"font-light\">\n                          {name && ` - ${name}`}\n                        </span>\n                      </Select.ItemText>\n                      <Select.ItemIndicator className=\"size-4\">\n                        <Icon name=\"icon-gui-check-micro\" size=\"16px\" />\n                      </Select.ItemIndicator>\n                    </Select.Item>\n                  ))}\n                </Select.Group>\n              ))}\n            </Select.Viewport>\n\n            <Select.ScrollDownButton className=\"flex items-center justify-center h-6 bg-neutral-000 dark:bg-neutral-1300 text-neutral-1300 dark:text-neutral-000 cursor-default focus-base\">\n              <Icon name=\"icon-gui-chevron-down-outline\" size=\"16px\" />\n            </Select.ScrollDownButton>\n          </Select.Content>\n        </Select.Portal>\n      </Select.Root>\n    );\n  }, [apiKeys, isDemoMode, selectedApiKey, onApiKeyChange, renderDemoMode]);\n\n  return (\n    <div className=\"flex items-center border-t border-neutral-300 dark:border-neutral-1000 px-3 py-3\">\n      <span className=\"ui-text-label4 text-neutral-700 dark:text-neutral-600 mr-1\">\n        API key:\n      </span>\n      {renderApiKeyDropdown}\n    </div>\n  );\n};\n\nexport default ApiKeySelector;\n"],"names":["React","useMemo","Select","Badge","Icon","Tooltip","ApiKeySelector","apiKeys","selectedApiKey","onApiKeyChange","isDemoMode","length","app","renderDemoMode","div","className","triggerProps","contentProps","triggerElement","name","size","color","additionalCSS","renderApiKeyDropdown","Root","value","onValueChange","Trigger","aria-label","Value","Portal","Content","ScrollUpButton","Viewport","map","apiKeyItem","Group","key","Label","keys","Item","ItemText","substring","span","ItemIndicator","ScrollDownButton"],"mappings":"AAAA,OAAOA,OAASC,OAAO,KAAQ,OAAQ,AACvC,WAAYC,WAAY,wBAAyB,AACjD,QAAOC,UAAW,UAAW,AAC7B,QAAOC,SAAU,SAAU,AAC3B,QAAOC,YAAa,YAAa,CASjC,MAAMC,eAAiB,CAAC,CACtBC,OAAO,CACPC,cAAc,CACdC,cAAc,CACM,IACpB,MAAMC,WAAaT,QACjB,IAAMM,SAASI,SAAW,GAAKJ,OAAO,CAAC,EAAE,CAACK,GAAG,GAAK,OAClD,CAACL,QAAQ,EAGX,MAAMM,eAAiBZ,QACrB,IACE,oBAACa,OAAIC,UAAU,2BACb,oBAACZ,OAAMY,UAAU,4CAA2C,aAG5D,oBAACV,SACCU,UAAU,OACVC,aAAc,CACZD,UAAW,KACb,EACAE,aAAc,CACZF,UACE,6EACJ,EACAG,eACE,oBAACJ,OAAIC,UAAU,0EACb,oBAACX,MACCe,KAAK,sCACLC,KAAK,OACLC,MAAM,yCACNC,cAAc,uDAEhB,oBAAClB,MACCe,KAAK,oCACLC,KAAK,OACLC,MAAM,0CACNC,cAAc,8DAIrB,oIAML,EAAE,EAGJ,MAAMC,qBAAuBtB,QAAQ,KACnC,GAAIS,WAAY,CACd,OAAOG,cACT,CAEA,GAAI,CAACN,SAASI,OAAQ,CACpB,OAAO,IACT,CAEA,OACE,oBAACT,OAAOsB,IAAI,EAACC,MAAOjB,eAAgBkB,cAAejB,gBACjD,oBAACP,OAAOyB,OAAO,EACbZ,UAAU,sSACVa,aAAW,WAEX,oBAAC1B,OAAO2B,KAAK,OACb,oBAAC3B,OAAOE,IAAI,EAACW,UAAU,UACrB,oBAACX,MAAKe,KAAK,8BAA8BC,KAAK,WAIlD,oBAAClB,OAAO4B,MAAM,MACZ,oBAAC5B,OAAO6B,OAAO,EAAChB,UAAU,oIACxB,oBAACb,OAAO8B,cAAc,EAACjB,UAAU,8IAC/B,oBAACX,MACCe,KAAK,gCACLC,KAAK,OACLE,cAAc,gBAIlB,oBAACpB,OAAO+B,QAAQ,EAAClB,UAAU,wBACxBR,QAAQ2B,GAAG,CAAC,AAACC,YACZ,oBAACjC,OAAOkC,KAAK,EAACC,IAAKF,WAAWvB,GAAG,EAC9BL,QAAQI,MAAM,CAAG,GAChB,oBAACT,OAAOoC,KAAK,EAACvB,UAAU,+FACrBoB,WAAWvB,GAAG,EAGlBuB,WAAWI,IAAI,CAACL,GAAG,CAAC,CAAC,CAAEf,IAAI,CAAEkB,GAAG,CAAE,GACjC,oBAACnC,OAAOsC,IAAI,EACVH,IAAK,CAAC,EAAEF,WAAWvB,GAAG,CAAC,CAAC,EAAEO,KAAK,CAAC,EAAEkB,IAAI,CAAC,CACvCZ,MAAOY,IACPtB,UAAU,2SAEV,oBAACb,OAAOuC,QAAQ,MACbJ,IAAI1B,MAAM,CAAG,GAAK,CAAC,EAAE0B,IAAIK,SAAS,CAAC,EAAG,IAAI,GAAG,CAAC,CAAGL,IAClD,oBAACM,QAAK5B,UAAU,cACbI,MAAQ,CAAC,GAAG,EAAEA,KAAK,CAAC,GAGzB,oBAACjB,OAAO0C,aAAa,EAAC7B,UAAU,UAC9B,oBAACX,MAAKe,KAAK,uBAAuBC,KAAK,eAQnD,oBAAClB,OAAO2C,gBAAgB,EAAC9B,UAAU,8IACjC,oBAACX,MAAKe,KAAK,gCAAgCC,KAAK,YAM5D,EAAG,CAACb,QAASG,WAAYF,eAAgBC,eAAgBI,eAAe,EAExE,OACE,oBAACC,OAAIC,UAAU,oFACb,oBAAC4B,QAAK5B,UAAU,8DAA6D,YAG5EQ,qBAGP,CAEA,gBAAejB,cAAe"}