@layer components {
  .c-meganav-wrapper {
    @apply antialiased shadow-subtle bg-white font-sans font-light top-0 fixed w-full;
  }

  .c-meganav {
    @apply h-64 flex justify-between items-center max-w-screen-xl mx-auto px-24 md:px-32 lg:px-40 xl:px-64;
  }

  .c-meganav-dropdown,
  .c-meganav-mobile-dropdown,
  .c-meganav-mobile-panel,
  .c-meganav-account-panel {
    position: absolute;
    visibility: hidden;
    z-index: 1;

    top: var(--spacing-64);
    left: 0;
    right: 0;

    overflow: scroll;

    @apply border-mid-grey border-t;
  }

  .c-meganav-account-panel {
    left: auto;
    min-width: 320px;
    box-shadow: 0px 24px 80px rgba(0, 0, 0, 0.1);
    @apply bg-white rounded-t-none;
  }

  .c-meganav-dropdown {
    box-shadow: 0px 24px 80px rgba(0, 0, 0, 0.1);
    background-color: var(--color-white);
  }

  .c-meganav-mobile-panel {
    z-index: 2;
    top: 0;
    background-color: var(--color-white);
    opacity: 0.3;
    transform: translateX(-100%);
    min-height: 100%;
    padding-bottom: var(--spacing-8);
  }

  /* Used by js to show dropdowns on hover */
  .c-meganav-item-hover .c-meganav-dropdown,
  .c-meganav-item-hover .c-meganav-account-panel {
    @apply visible opacity-100;
  }

  .c-meganav-item:focus-within .c-meganav-dropdown {
    visibility: visible;
    opacity: 1;
    transform: rotateX(0);
    transition: none;
  }

  .c-meganav-item:focus-within ~ .c-meganav-item .c-meganav-dropdown {
    visibility: hidden;
    opacity: 0;
  }

  .c-meganav-item:focus-within .c-meganav-mobile-dropdown {
    visibility: visible;
    opacity: 1;
    /* transform: rotateX(0); */
    height: 90vh;
  }

  .c-meganav-item:focus-within .c-meganav-account-panel {
    visibility: visible;
    opacity: 1;
    transition: none;
    /* transform: rotateX(0); */
  }

  /* Controls the hamburger/close menu button switch */
  .c-meganav-item:focus-within
    [aria-controls="mobile-dropdown"]
    svg:first-child {
    display: none;
  }

  .c-meganav-item:focus-within
    [aria-controls="mobile-dropdown"]
    svg:last-child {
    display: inline;
  }

  .c-meganav-mobile-item:focus-within .c-meganav-mobile-panel {
    @apply visible opacity-100 transform translate-x-0;
  }

  .c-meganav-nav-item {
    @apply text-menu2 font-medium block mx-8 xl:mx-12 px-0 py-20 text-cool-black hover:text-gui-hover focus:text-gui-focus focus:outline-none;
  }

  .c-meganav-mobile-link {
    padding: 15px 0 14px;
    @apply text-menu2 block flex items-baseline font-medium text-cool-black outline-none w-full text-left focus:outline-none;
  }

  .c-meganav-panel {
    @apply grid gap-24 md:gap-32 grid-cols-1 max-w-screen-xl py-24 lg:py-32 px-24 md:px-32 lg:px-32 xl:px-64 mx-auto;
  }

  .c-meganav-media {
    @apply block px-8 py-8 hover:bg-light-grey rounded relative -left-8 w-extend-8;
  }

  .c-meganav-media-with-image {
    grid-template-columns: max-content 1fr;
    grid-template-rows: min-content 1fr;

    @apply block px-8 py-8 hover:bg-light-grey rounded relative -left-8 grid gap-x-16 w-extend-8;
  }

  .c-meganav-media-heading {
    @apply text-menu3 text-cool-black font-medium group-hover:text-gui-hover group-focus:text-gui-focus;
  }

  .c-meganav-media-copy {
    @apply text-p3 text-dark-grey;
  }

  .c-meganav-overline {
    @apply text-overline2 text-cool-black uppercase font-medium tracking-widen-0.15 p-overline;
  }

  .c-meganav-hr {
    @apply my-0 text-mid-grey;
  }
}
